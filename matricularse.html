<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Matriculación</title>
    <link rel="stylesheet" href="css.css">
</head>
<body>
    <div class="top-info-bar">
        <p> Av. El Retorno 5-130 y Av. Ricardo Sánchez, Ibarra, Ecuador | uevmg@gmail.com</p>
    </div>
    <header>
        <div class="header-top">
            <img src="unidad-educativa-logo.png" alt="Logo de la Institución" class="logo">
            <div class="header-text">
                <h1>Unidad Educativa "Victor Manuel Guzman"</h1>
                <p>50 años de Educación Estudiantil</p>
            </div>
            <div class="auth-links">
                <a href="registro.html">Registrarse</a>
                <a href="login.html">Iniciar Sesión</a>
            </div>
        </div>
        <nav>
            <ul class="menu">
                <li><a href="index.html">Inicio</a></li>
                <li class="dropdown">
                    <a href="#">Institución</a>
                    <ul class="submenu">
                        <li><a href="autoridades.html">Autoridades</a></li>
                        <li><a href="index.html#consejo">Consejo Ejecutivo</a></li>
                        <li><a href="index.html#historia">Historia</a></li>
                        <li><a href="index.html#patrono">Patrono</a></li>
                        <li><a href="index.html#uniforme">Uniforme</a></li>
                        <li><a href="index.html#himno">Himno</a></li>
                        <li><a href="index.html#datos">Datos Informativos</a></li>
                    </ul>
                </li>
                <li><a href="index.html#docentes">Docentes</a></li>
                <li><a href="index.html#dece">DECE</a></li>
                <li><a href="index.html#recursos">Recursos Didácticos</a></li>
                <li><a href="index.html#fotos">Fotos</a></li>
                <li><a href="ubicacion.html">Ubicación</a></li>
                <li class="dropdown">
                    <a href="#">Registro</a>
                    <ul class="submenu">
                        <li><a href="matricularse.html" target="_blank">Matricularse</a></li>
                        <li><a href="requisitos.html" target="_blank">Requisitos</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="centered-section">
            <h2>Formulario de Matriculación</h2>
            <form id="form-matriculacion">
                <label for="codigo">Código:</label>
                <input type="text" id="codigo" name="codigo" required>

                <label for="apellidos">Apellidos:</label>
                <input type="text" id="apellidos" name="apellidos" required>

                <label for="nombres">Nombres:</label>
                <input type="text" id="nombres" name="nombres" required>

                <label for="provincia_nacimiento">Provincia de Nacimiento:</label>
                <input type="text" id="provincia_nacimiento" name="provincia_nacimiento">

                <label for="canton">Cantón:</label>
                <input type="text" id="canton" name="canton">

                <label for="genero">Género:</label>
                <select id="genero" name="genero">
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                </select>

                <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento">

                <label for="nacionalidad">Nacionalidad:</label>
                <input type="text" id="nacionalidad" name="nacionalidad">

                <label for="institucion_procede">Institución de Procedencia:</label>
                <input type="text" id="institucion_procede" name="institucion_procede">

                <h3>Datos de la Vivienda</h3>
                <label for="provincia_vivienda">Provincia:</label>
                <input type="text" id="provincia_vivienda" name="provincia_vivienda">

                <label for="ciudad">Ciudad:</label>
                <input type="text" id="ciudad" name="ciudad">

                <label for="parroquia">Parroquia:</label>
                <input type="text" id="parroquia" name="parroquia">

                <label for="direccion">Dirección:</label>
                <input type="text" id="direccion" name="direccion">

                <label for="telefono_convencional">Teléfono Convencional:</label>
                <input type="text" id="telefono_convencional" name="telefono_convencional">

                <h3>¿A quién acudir en caso de emergencia?</h3>
                <label for="emergencia_nombres">Nombres y Apellidos:</label>
                <input type="text" id="emergencia_nombres" name="emergencia_nombres">

                <label for="emergencia_parentesco">Parentesco:</label>
                <input type="text" id="emergencia_parentesco" name="emergencia_parentesco">

                <h3>Datos de los Familiares</h3>
                <h4>Padre</h4>
                <label for="padre_nombres">Apellidos y Nombres:</label>
                <input type="text" id="padre_nombres" name="padre_nombres">

                <label for="padre_cedula">Cédula:</label>
                <input type="text" id="padre_cedula" name="padre_cedula">

                <label for="padre_telefono">Teléfono Convencional:</label>
                <input type="text" id="padre_telefono" name="padre_telefono">

                <label for="padre_profesion">Profesión:</label>
                <input type="text" id="padre_profesion" name="padre_profesion">

                <label for="padre_email">Email:</label>
                <input type="email" id="padre_email" name="padre_email">

                <h4>Madre</h4>
                <label for="madre_nombres">Apellidos y Nombres:</label>
                <input type="text" id="madre_nombres" name="madre_nombres">

                <label for="madre_cedula">Cédula:</label>
                <input type="text" id="madre_cedula" name="madre_cedula">

                <label for="madre_telefono">Teléfono Convencional:</label>
                <input type="text" id="madre_telefono" name="madre_telefono">

                <label for="madre_profesion">Profesión:</label>
                <input type="text" id="madre_profesion" name="madre_profesion">

                <label for="madre_email">Email:</label>
                <input type="email" id="madre_email" name="madre_email">

                <h4>Representante Legal</h4>
                <label for="representante_nombres">Apellidos y Nombres:</label>
                <input type="text" id="representante_nombres" name="representante_nombres">

                <label for="representante_cedula">Cédula:</label>
                <input type="text" id="representante_cedula" name="representante_cedula">

                <label for="representante_telefono">Teléfono Convencional:</label>
                <input type="text" id="representante_telefono" name="representante_telefono">

                <label for="representante_profesion">Profesión:</label>
                <input type="text" id="representante_profesion" name="representante_profesion">

                <label for="representante_email">Email:</label>
                <input type="email" id="representante_email" name="representante_email">

                <h3>Ubicación</h3>
                <label for="latitud">Latitud:</label>
                <input type="text" id="latitud" name="latitud">

                <label for="longitud">Longitud:</label>
                <input type="text" id="longitud" name="longitud">

                <button type="submit">Enviar</button>
            </form>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>UNIDAD EDUCATIVA "VICTOR MANUEL GUZMAN"</h3>
                <div class="footer-line"></div>
                <p>Todos los contenidos digitales del portal web, se prohíbe su reproducción total, parcial y traducción a cualquier idioma sin autorización escrita por su titular.</p>
            </div>
            <div class="footer-section">
                <h3>ACCESOS DIRECTOS</h3>
                <div class="footer-line"></div>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="registro.html">Registro</a></li>
                    <li><a href="#autoridades">Autoridades</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>CONTACTOS</h3>
                <div class="footer-line"></div>
                <p>Av. El Retorno 5-130 y Av. Ricardo Sánchez, Ibarra, Ecuador</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Unidad Educativa Victor Manuel Guzmán © Copyrights 2025 Diseñado por área de Informática</p>
        </div>
    </footer>
    <script type="module">
        import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

        // Configuración de Supabase
        const supabaseUrl = "https://zeijayrxciyzymysbyvp.supabase.co";
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplaWpheXJ4Y2l5enlteXNieXZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxNjYyMjMsImV4cCI6MjA1OTc0MjIyM30.DxT8_5acA88JxhVV7n2UqmrZ_9d0DPABi6eKSO8cpDE";
        const supabase = createClient(supabaseUrl, supabaseKey);

        document.getElementById('form-matriculacion').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            try {
                const { error } = await supabase
                    .from('solicitudesMatriculacion')
                    .insert([data]);

                if (error) {
                    console.error('Error al guardar la solicitud:', error.message);
                    alert('Error al guardar la solicitud: ' + error.message);
                } else {
                    alert('Solicitud registrada exitosamente.');
                    window.location.href = 'solicitudMatriculacion.html';
                }
            } catch (err) {
                console.error('Error inesperado al guardar la solicitud:', err);
                alert('Ocurrió un error inesperado. Por favor, intenta nuevamente.');
            }
        });
    </script>
</body>
</html>
